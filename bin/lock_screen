#!/usr/bin/env bash
# Save an image of your current monitors and blur it then, lock your screen.

function lock_screen() {
    local tmp_file tmp_file_blur

    tmp_file='/tmp/lock_screen_screenshot.tmp.png'
    tmp_file_blur='/tmp/lock_screen_screenshot_blur.tmp.png'

    scrot -o "${tmp_file}"
    convert -blur 0x20 "${tmp_file}" "${tmp_file_blur}"

    i3lock --no-unlock-indicator --nofork --ignore-empty-password -i "${tmp_file_blur}"

    rm -f "${tmp_file}" "${tmp_file_blur}"
}

lock_screen
