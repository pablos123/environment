#!/usr/bin/env bash
set -Eeuo pipefail

# --------------------------------------------------
# Open terminal based on available memory
# Uses kitty if sufficient RAM, otherwise fallback to st
# --------------------------------------------------

readonly MEMORY_THRESHOLD_KB=10000000

total_memory="$(free --total | awk '/^Mem:/ {print $2}')"

if (( total_memory > MEMORY_THRESHOLD_KB )); then
    exec kitty
else
    exec /usr/local/bin/st
fi
