#!/usr/bin/env bash

function shutdown_machine() {
    local sudo_password

    sudo_password="$(zenity --password)" || exit 1

    if ! yes "${sudo_password}" | sudo -Sv; then
        echo "Bad password. Aborting."
        exit 1
    fi

    sudo shutdown now
}

shutdown_machine
