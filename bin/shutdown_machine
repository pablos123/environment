#!/usr/bin/env bash
set -Eeuo pipefail

source "${HOME}/environment/lib/print_functions.bash"

# --------------------------------------------------
# GUI shutdown with password prompt
# --------------------------------------------------

command -v zenity >/dev/null || die "zenity not found"

sudo_password="$(zenity --password)" || exit 0

if ! echo "${sudo_password}" | sudo -S -v 2>/dev/null; then
    die "Bad password. Aborting."
fi

sudo shutdown now
