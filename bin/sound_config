#!/usr/bin/env bash

previous_pavu="$(xdotool search --onlyvisible --class "pavucontrol")" || "$(xdotool search --onlyvisible --class "Pavucontrol")"
if [[ -n "${previous_pavu}" ]]; then
    xdotool windowclose "${previous_pavu}"
    exit 0
fi

x_size=600
y_size=400

source "${HOME}/environment/lib/helper_functions.sh"

pavucontrol -t 3 & disown

while ! xdotool search --onlyvisible --class "pavucontrol" && ! xdotool search --onlyvisible --class "Pavucontrol"; do
    sleep 0.3
done

xdotool search --onlyvisible --class "pavucontrol" windowsize "${x_size}" "${y_size}" windowmove $(calculate_applet_position "${x_size}" "${y_size}") ||
xdotool search --onlyvisible --class "Pavucontrol" windowsize "${x_size}" "${y_size}" windowmove $(calculate_applet_position "${x_size}" "${y_size}") || echo asdfasdf


